# 配置

## 应用配置

1. 配置自定义域名 Azure static web apps https://docs.microsoft.com/zh-CN/azure/static-web-apps/custom-domain
2. 配置端口
   `const port = process.env.PORT || 3000`
3. 配置 CORS
4. 配置证书 certificates
5. 配置 机密 secrets
    - Azure Key Vault
    - App settings : 然后使用环境变量来使用

## 自定义域名

## express 应用中使用 key Vault

1. .env 添加环境变量, 上线时需要 添加到 App settings 中
    - AZURE_TENANT_ID
    - AZURE_CLIENT_ID
    - AZURE_CLIENT_SECRET
    - KEY_VAULT_NAME:
    - KEY_VAULT_SECRET_NAME_DATABASEURL
2. 添加到 Azure app service 中
    - app settings 中
3. 重启 app service
4. 使用 js 获取 key vault 机密
